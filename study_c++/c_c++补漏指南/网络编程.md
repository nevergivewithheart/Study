# 网络编程
## 一、socket通信
> 高并发的架构
> - 无锁化
> - 缓存
### 不同平台的socket使用了解
 1. Linux
    > 在Unix/linux中，不同的硬件设备被当成一个文件。【一切皆文件】。

    为了表示和区分已经打开的文件，系统回归给文件分配一个ID【整数】，即**文件描述符**。

    - 通常0表示**标准输入文件**，即对应的硬件设备：**键盘**
    - 通常1表示**标准输出文件**，即对应硬件设备被：**显示器**

        程序在执行任何形式的IO操作时，都是在读取或者写入一个文件描述符。
    一个文件描述符只是一个和打开文件相关的整数，他的背后可能是普通文件、FIFO、管道、终端、键盘、显示器，甚至是一个网络连接。

    > 可以使用socket()创建一个网络连接【或者说打开一个网络文件】，socket()返回值就是一个文件描述符，即可以使用普通的文件操作来传输数据：

    - 使用read()读取从远程传来的数据
    - 使用write()向远程计算机写入数据

2. windows
    > windows也有“文件描述符”的概念，通常称为“文件句柄”。

    - windows会区分文件和socket
    - windows把socket当成一个网络连接，因此需要调用专门针对socket设计的数据传输函数。

### socket类型
> socket的类型有很多，例如DARPA Internet地址(Internet套接字)、本地节点套接字（Unix套接字）等；在这里只讨论网路套接字即第一种。

根据数据传输方式，可以将Internet套接字分为两种，通过socket创建时必须指明类型
- 流格式套接字【stream socket】
- 数据报格式

1. 流格式套接字（SOCK_STREAM）
    > - 面向连接的套接字；
    > - 可靠的、双向的通信数据流
    > - 如果损坏或者丢失，可以重新发送。【存在纠错机制】
    
    SOCK_STREAM的几个特征：
    - 数据在传输过程中不会消失；
    - 数据是按顺序传输的；
    - 数据的发送和接收不是同步的【或者不存在数据边界】 

    使用TCP/IP协议
    - tcp【传输协议】保证数据的正确性
    - ip【网络协议】控制数据如何从源头到达目的地【路由】

    “数据的发送和接收不同步”
    流格式套接字的内部有个缓冲区（字符数组），通过socket传输的数据将保存到缓冲区。接收端在收到数据并一定马上读取，只要数据不超过缓冲区的容量，接收端可以一次性或者分多次读取。【chuanb
    】

